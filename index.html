<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Darts Scorer + Stats</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="setupScreen" class="screen active">
        <div class="setup-container">
            <h1>üéØ Pro Darts Scorer</h1>
            
            <div class="input-group">
                <label>Game Type</label>
                <select id="gameType">
                    <option value="301">301</option>
                    <option value="501" selected>501</option>
                    <option value="701">701</option>
                </select>
            </div>

            <div class="input-group">
                <label>Add Players</label>
                <div style="display: flex; gap: 10px;">
                    <input type="text" id="newPlayerName" placeholder="Enter name...">
                    <button class="btn btn-secondary" onclick="addPlayer()" style="width: auto; margin: 0;">+</button>
                </div>
            </div>

            <div class="input-group">
                <label>Players in Game</label>
                <div class="player-list" id="playerList"></div>
            </div>

            <button class="btn" onclick="startGame()">Start Game</button>
            <button class="btn btn-secondary" onclick="showScreen('statsScreen')">View Player Stats</button>

            <div id="serverStatus" class="server-status-indicator">
                <span class="status-dot"></span>
                <span class="status-text">Checking server connection...</span>
            </div>
        </div>
    </div>

    <div id="gameScreen" class="screen">
        <header>
            <a href="#" onclick="location.reload()" class="reset-link">‚Üê New Game</a>
            <span style="color: #666">Leg 1</span>
        </header>

        <div class="active-player-display">
            <div class="player-name-large" id="activeName">Player 1</div>
            <div class="current-score-large" id="activeScore">501</div>
            <div class="stats-badge" id="activeAvg">Avg: 0.00</div>
            <div class="checkout-suggestion" id="checkoutHint"></div>
        </div>

        <div class="leaderboard" id="leaderboard"></div>

        <div class="controls">
            <div class="darts-thrown-display" id="dartsThrownDisplay">
                <span class="dart-score">-</span>
                <span class="dart-score">-</span>
                <span class="dart-score">-</span>
            </div>
            <div class="input-display" id="inputDisplay">0</div>
            <div class="dartboard-keypad">
                <div class="modifiers">
                    <button class="key key-mod" id="modDouble" onclick="selectMultiplier(2)">D</button>
                    <button class="key key-mod" id="modTreble" onclick="selectMultiplier(3)">T</button>
                    <button class="key key-special" onclick="enterSpecial(0)">MISS</button>
                    <button class="key key-special key-del" onclick="undoLastDart()">UNDO</button>
                </div>
                <div class="numbers">
                    <!-- Numbers 1-20 will be generated by JS -->
                </div>
                <div class="specials">
                    <button class="key key-bull" onclick="enterSpecial(25)">OUTER BULL</button>
                    <button class="key key-bull" onclick="enterSpecial(50)">BULLSEYE</button>
                </div>
            </div>
        </div>
    </div>

    <div id="statsScreen" class="screen">
        <header>
            <a href="#" onclick="showScreen('setupScreen')" class="reset-link">‚Üê Back to Setup</a>
            <span style="color: var(--accent-color); font-weight: bold;">Player Statistics</span>
        </header>

        <div class="stats-container">
            <div class="player-stats-list">
                <h2>Registered Players</h2>
                <ul id="registeredPlayersUl">
                    <!-- Player list will be populated by JS -->
                </ul>
            </div>

            <div class="player-stats-details" id="playerStatsDetails">
                <!-- Selected player's stats will be shown here -->
                <h2>Select a Player</h2>
                <p>Click on a player from the list to see their detailed stats.</p>
            </div>
        </div>
    </div>

    <div id="winModal" class="modal">
        <h2 id="winnerText">WINNER!</h2>
        <div class="confetti">Game Shot!</div>
        <div class="winner-stats" id="winnerStats"></div>
        <button class="btn" onclick="location.reload()" style="max-width: 200px;">Play Again</button>
    </div>

    <script src="app.js"></script>
</body>
</html>